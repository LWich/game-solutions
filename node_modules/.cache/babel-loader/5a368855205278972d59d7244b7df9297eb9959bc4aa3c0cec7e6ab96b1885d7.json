{"ast":null,"code":"import React,{useEffect,useState}from'react';import{twist}from'../../http/userAPi';import cls from'./style.module.css';import Modal from'../../Modal/modal';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const tg=window.Telegram.WebApp;function Wheel(){const[vis,setVis]=useState(false);const[prise,setPrise]=useState(0);const[time,setTime]=useState(0);const[animation,setAnimation]=useState('');const smallPrise=4;const mediumPrise=20;const bigPrise=50;const prises=[mediumPrise,smallPrise,smallPrise,smallPrise,smallPrise,mediumPrise,bigPrise,smallPrise];function startVibration(){vibrationInterval=setInterval(()=>{// Код для включения вибрации\nconsole.log(\"Вибрация включена\");},200);// Интервал 200 миллисекунд (0.2 секунды)\n}// Остановка вибрации через 5 секунд\nfunction stopVibration(){clearInterval(vibrationInterval);console.log(\"Вибрация остановлена\");}useEffect(()=>{setTimeout(()=>{if(time<24*3600){setTime(el=>el+1);}},1000);},[time]);const handleSpin=async()=>{startVibration();// Остановить вибрацию через 5 секунд\nsetTimeout(stopVibration,5000);//const data = await twist(tg?.initDataUnsafe?.user?.id);\nsetTime(24*3600);const requiredPrize=20;const getRandomIndexForPrize=(prises,requiredPrize)=>{const matchingIndices=prises.reduce((acc,prise,index)=>{if(prise===requiredPrize){acc.push(index);}return acc;},[]);const randomIndex=matchingIndices[Math.floor(Math.random()*matchingIndices.length)];return randomIndex;};const randomIndex=getRandomIndexForPrize(prises,requiredPrize);const segmentAngle=45;const targetRotation=360*5+randomIndex*segmentAngle;const styleSheet=document.styleSheets[0];const keyframes=\"\\n      @keyframes spin {\\n        0% {\\n          transform: rotate(0deg);\\n        }\\n          10% {\\n          transform: rotate(-30deg);\\n          }\\n\\n          80% {\\n            transform: rotate(\".concat(targetRotation,\"deg);\\n          }\\n          100% {\\n          transform: rotate(\").concat(targetRotation,\"deg);\\n          }\\n      }\\n    \");if(styleSheet.cssRules.length>0){styleSheet.deleteRule(0);}styleSheet.insertRule(keyframes,styleSheet.cssRules.length);setAnimation(\"spin 5s ease-in-out\");setTimeout(()=>{setVis(true);setTimeout(()=>{setPrise(prises[randomIndex]);setAnimation('');console.log(prises[randomIndex]);},100);},4900);};function getParseTime(time){const hCount=Math.floor(time/3600);const mCount=Math.floor(time%3600/60);const sCount=Math.floor(time%60);const h=hCount>9?hCount:\"0\".concat(hCount);const m=mCount>9?mCount:\"0\".concat(mCount);const s=sCount>9?sCount:\"0\".concat(sCount);return\"\".concat(h,\":\").concat(m,\":\").concat(s);}function getProccent(){return time/(3600*24/100);}function modalClose(){setTime(0);setTimeout(()=>{setVis(false);},2500);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:cls.container,children:[/*#__PURE__*/_jsx(\"img\",{className:cls.arrow,src:\"assets/images/arrow.png\",alt:\"arrow\"}),/*#__PURE__*/_jsx(\"img\",{className:cls.wheel,style:{animation:animation},src:\"assets/images/wheel.png\",alt:\"wheel\"})]}),\" \",time>=24*3600?/*#__PURE__*/_jsx(\"button\",{className:cls.button,onClick:handleSpin,children:\"\\u0412\\u044B\\u0438\\u0433\\u0440\\u044B\\u0432\\u0430\\u0442\\u044C\"}):/*#__PURE__*/_jsx(\"button\",{className:cls.buttonAwait,style:{background:\"linear-gradient(90deg, #008aff \".concat(getProccent(),\"%, #fff \").concat(getProccent(),\"%)\")},children:getParseTime(24*3600-time)}),/*#__PURE__*/_jsx(Modal,{vis:vis,setVis:modalClose,coins:prise})]});}export default Wheel;","map":{"version":3,"names":["React","useEffect","useState","twist","cls","Modal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","tg","window","Telegram","WebApp","Wheel","vis","setVis","prise","setPrise","time","setTime","animation","setAnimation","smallPrise","mediumPrise","bigPrise","prises","startVibration","vibrationInterval","setInterval","console","log","stopVibration","clearInterval","setTimeout","el","handleSpin","requiredPrize","getRandomIndexForPrize","matchingIndices","reduce","acc","index","push","randomIndex","Math","floor","random","length","segmentAngle","targetRotation","styleSheet","document","styleSheets","keyframes","concat","cssRules","deleteRule","insertRule","getParseTime","hCount","mCount","sCount","h","m","s","getProccent","modalClose","children","className","container","arrow","src","alt","wheel","style","button","onClick","buttonAwait","background","coins"],"sources":["C:/Users/user/Desktop/Новая папка (2)/game-solutions/src/components/Wheel/MainPage/Wheel/Wheel.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { twist } from '../../http/userAPi';\r\nimport cls from './style.module.css';\r\nimport Modal from '../../Modal/modal';\r\n\r\nconst tg = window.Telegram.WebApp;\r\n\r\nfunction Wheel() {\r\n  const [vis, setVis] = useState(false);\r\n  const [prise, setPrise] = useState(0);\r\n  const [time, setTime] = useState(0);\r\n  const [animation, setAnimation] = useState('');\r\n  const smallPrise = 4;\r\n  const mediumPrise = 20;\r\n  const bigPrise = 50;\r\n\r\n  const prises = [\r\n    mediumPrise,\r\n    smallPrise,\r\n    smallPrise,\r\n    smallPrise,\r\n    smallPrise,\r\n    mediumPrise,\r\n    bigPrise,\r\n    smallPrise,\r\n    \r\n  ];\r\n\r\n  function startVibration() {\r\n    vibrationInterval = setInterval(() => {\r\n      // Код для включения вибрации\r\n      console.log(\"Вибрация включена\");\r\n    }, 200); // Интервал 200 миллисекунд (0.2 секунды)\r\n  }\r\n  \r\n  // Остановка вибрации через 5 секунд\r\n  function stopVibration() {\r\n    clearInterval(vibrationInterval);\r\n    console.log(\"Вибрация остановлена\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      if(time < 24 * 3600) {\r\n        setTime(el => el+1);\r\n        \r\n      }\r\n    }, 1000);\r\n  }, [time])\r\n\r\n  const handleSpin = async () => {\r\n\r\n    startVibration();\r\n\r\n    // Остановить вибрацию через 5 секунд\r\n    setTimeout(stopVibration, 5000);\r\n\r\n    //const data = await twist(tg?.initDataUnsafe?.user?.id);\r\n\r\n    setTime(24 * 3600);\r\n    const requiredPrize = 20; \r\n\r\n    const getRandomIndexForPrize = (prises, requiredPrize) => {\r\n\r\n      const matchingIndices = prises.reduce((acc, prise, index) => {\r\n        if (prise === requiredPrize) {\r\n          acc.push(index);\r\n        }\r\n        return acc;\r\n      }, []);\r\n\r\n      const randomIndex = matchingIndices[Math.floor(Math.random() * matchingIndices.length)];\r\n    \r\n      return randomIndex;\r\n    };\r\n\r\n    const randomIndex = getRandomIndexForPrize(prises, requiredPrize);\r\n\r\n    const segmentAngle = 45;\r\n    const targetRotation = 360 * 5 + (randomIndex) * segmentAngle; \r\n  \r\n\r\n    const styleSheet = document.styleSheets[0];\r\n    const keyframes = `\r\n      @keyframes spin {\r\n        0% {\r\n          transform: rotate(0deg);\r\n        }\r\n          10% {\r\n          transform: rotate(-30deg);\r\n          }\r\n\r\n          80% {\r\n            transform: rotate(${targetRotation}deg);\r\n          }\r\n          100% {\r\n          transform: rotate(${targetRotation}deg);\r\n          }\r\n      }\r\n    `;\r\n\r\n    if (styleSheet.cssRules.length > 0) {\r\n      styleSheet.deleteRule(0);\r\n    }\r\n\r\n    styleSheet.insertRule(keyframes, styleSheet.cssRules.length);\r\n\r\n    setAnimation(`spin 5s ease-in-out`);\r\n\r\n    setTimeout(() => {\r\n      setVis(true);\r\n      setTimeout(() => {\r\n        setPrise(prises[randomIndex]);\r\n        setAnimation('');\r\n        console.log(prises[randomIndex]);\r\n      }, 100)\r\n\r\n    }, 4900);\r\n  };\r\n\r\n  function getParseTime(time) {\r\n    const hCount = Math.floor(time / 3600);\r\n    const mCount = Math.floor((time % 3600) / 60);\r\n    const sCount = Math.floor(time % 60);\r\n\r\n    const h = hCount > 9 ? hCount : `0${hCount}`;\r\n    const m = mCount > 9 ? mCount : `0${mCount}`;\r\n    const s = sCount > 9 ? sCount : `0${sCount}`;\r\n    return `${h}:${m}:${s}`;\r\n  }\r\n\r\n  function getProccent() {\r\n    return time / (3600 * 24 / 100);\r\n  }\r\n\r\n  function modalClose() {\r\n    setTime(0);\r\n    setTimeout(() => {\r\n      setVis(false);\r\n    }, 2500)\r\n    \r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={cls.container}>\r\n        <img className={cls.arrow} src='assets/images/arrow.png' alt='arrow' />\r\n        <img\r\n          className={cls.wheel}\r\n          style={{ animation: animation }}\r\n          src='assets/images/wheel.png'\r\n          alt='wheel'\r\n        />\r\n      </div> {\r\n        time >= 24 * 3600 ?\r\n        <button className={cls.button} onClick={handleSpin}>Выигрывать</button> :\r\n        <button className={cls.buttonAwait} style={{background: `linear-gradient(90deg, #008aff ${getProccent()}%, #fff ${getProccent()}%)`}}>{getParseTime(24 * 3600 - time)}</button>\r\n      }\r\n      \r\n      <Modal vis={vis} setVis={modalClose} coins={prise}></Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Wheel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}