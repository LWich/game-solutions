{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\\\u041D\\u043E\\u0432\\u0430\\u044F \\u043F\\u0430\\u043F\\u043A\\u0430 (2)\\\\game-solutions\\\\src\\\\components\\\\Wheel\\\\MainPage\\\\Wheel\\\\Wheel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { twist } from '../../../http/userAPi';\nimport cls from './style.module.css';\nimport Modal from '../../Modal/modal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst tg = window.Telegram.WebApp;\nfunction Wheel() {\n  _s();\n  const [vis, setVis] = useState(false);\n  const [prise, setPrise] = useState(0);\n  const [time, setTime] = useState(0);\n  const [animation, setAnimation] = useState('');\n  const smallPrise = 4;\n  const mediumPrise = 20;\n  const bigPrise = 50;\n  const prises = [mediumPrise, smallPrise, smallPrise, smallPrise, smallPrise, mediumPrise, bigPrise, smallPrise];\n  useEffect(() => {\n    setTimeout(() => {\n      if (time < 24 * 3600) {\n        setTime(el => el + 1);\n      }\n    }, 1000);\n  }, [time]);\n  const handleSpin = async () => {\n    var _tg$initDataUnsafe, _tg$initDataUnsafe$us;\n    const data = await twist(tg === null || tg === void 0 ? void 0 : (_tg$initDataUnsafe = tg.initDataUnsafe) === null || _tg$initDataUnsafe === void 0 ? void 0 : (_tg$initDataUnsafe$us = _tg$initDataUnsafe.user) === null || _tg$initDataUnsafe$us === void 0 ? void 0 : _tg$initDataUnsafe$us.id);\n    setTime(data.time);\n    const requiredPrize = data.prise;\n    const getRandomIndexForPrize = (prises, requiredPrize) => {\n      const matchingIndices = prises.reduce((acc, prise, index) => {\n        if (prise === requiredPrize) {\n          acc.push(index);\n        }\n        return acc;\n      }, []);\n      const randomIndex = matchingIndices[Math.floor(Math.random() * matchingIndices.length)];\n      return randomIndex;\n    };\n    const randomIndex = getRandomIndexForPrize(prises, requiredPrize);\n    const segmentAngle = 45;\n    const targetRotation = 360 * 5 + randomIndex * segmentAngle;\n    const styleSheet = document.styleSheets[0];\n    const keyframes = `\n      @keyframes spin {\n        0% {\n          transform: rotate(0deg);\n        }\n          10% {\n          transform: rotate(-30deg);\n          }\n\n          80% {\n            transform: rotate(${targetRotation}deg);\n          }\n          100% {\n          transform: rotate(${targetRotation}deg);\n          }\n      }\n    `;\n    if (styleSheet.cssRules.length > 0) {\n      styleSheet.deleteRule(0);\n    }\n    styleSheet.insertRule(keyframes, styleSheet.cssRules.length);\n    setAnimation(`spin 5s ease-in-out`);\n    setTimeout(() => {\n      setVis(true);\n      setTimeout(() => {\n        setPrise(prises[randomIndex]);\n        setAnimation('');\n        console.log(prises[randomIndex]);\n      }, 100);\n    }, 4900);\n  };\n  function getParseTime(time) {\n    const hCount = Math.floor(time / 3600);\n    const mCount = Math.floor(time % 3600 / 60);\n    const sCount = Math.floor(time % 60);\n    const h = hCount > 9 ? hCount : `0${hCount}`;\n    const m = mCount > 9 ? mCount : `0${mCount}`;\n    const s = sCount > 9 ? sCount : `0${sCount}`;\n    return `${h}:${m}:${s}`;\n  }\n  function getProccent() {\n    return time / (3600 * 24 / 100);\n  }\n  function modalClose() {\n    setTime(0);\n    setTimeout(() => {\n      setVis(false);\n    }, 2500);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: cls.container,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: cls.arrow,\n        src: \"assets/images/arrow.png\",\n        alt: \"arrow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: cls.wheel,\n        style: {\n          animation: animation\n        },\n        src: \"assets/images/wheel.png\",\n        alt: \"wheel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), \" \", time >= 24 * 3600 ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: cls.button,\n      onClick: handleSpin,\n      children: \"\\u0412\\u044B\\u0438\\u0433\\u0440\\u044B\\u0432\\u0430\\u0442\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: cls.buttonAwait,\n      style: {\n        background: `linear-gradient(90deg, #008aff ${getProccent()}%, #fff ${getProccent()}%)`\n      },\n      children: getParseTime(24 * 3600 - time)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      vis: vis,\n      setVis: modalClose,\n      coins: prise\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Wheel, \"3O/LnI1JkW5txxwwr+E9CPm8nwA=\");\n_c = Wheel;\nexport default Wheel;\nvar _c;\n$RefreshReg$(_c, \"Wheel\");","map":{"version":3,"names":["React","useEffect","useState","twist","cls","Modal","jsxDEV","_jsxDEV","Fragment","_Fragment","tg","window","Telegram","WebApp","Wheel","_s","vis","setVis","prise","setPrise","time","setTime","animation","setAnimation","smallPrise","mediumPrise","bigPrise","prises","setTimeout","el","handleSpin","_tg$initDataUnsafe","_tg$initDataUnsafe$us","data","initDataUnsafe","user","id","requiredPrize","getRandomIndexForPrize","matchingIndices","reduce","acc","index","push","randomIndex","Math","floor","random","length","segmentAngle","targetRotation","styleSheet","document","styleSheets","keyframes","cssRules","deleteRule","insertRule","console","log","getParseTime","hCount","mCount","sCount","h","m","s","getProccent","modalClose","children","className","container","arrow","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","wheel","style","button","onClick","buttonAwait","background","coins","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/Новая папка (2)/game-solutions/src/components/Wheel/MainPage/Wheel/Wheel.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { twist } from '../../../http/userAPi';\r\nimport cls from './style.module.css';\r\nimport Modal from '../../Modal/modal';\r\n\r\nconst tg = window.Telegram.WebApp;\r\n\r\nfunction Wheel() {\r\n  const [vis, setVis] = useState(false);\r\n  const [prise, setPrise] = useState(0);\r\n  const [time, setTime] = useState(0);\r\n  const [animation, setAnimation] = useState('');\r\n  const smallPrise = 4;\r\n  const mediumPrise = 20;\r\n  const bigPrise = 50;\r\n\r\n  const prises = [\r\n    mediumPrise,\r\n    smallPrise,\r\n    smallPrise,\r\n    smallPrise,\r\n    smallPrise,\r\n    mediumPrise,\r\n    bigPrise,\r\n    smallPrise,\r\n    \r\n  ];\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      if(time < 24 * 3600) {\r\n        setTime(el => el+1);\r\n        \r\n      }\r\n    }, 1000);\r\n  }, [time])\r\n\r\n  const handleSpin = async () => {\r\n\r\n    const data = await twist(tg?.initDataUnsafe?.user?.id);\r\n\r\n    setTime(data.time);\r\n    const requiredPrize = data.prise; \r\n\r\n    const getRandomIndexForPrize = (prises, requiredPrize) => {\r\n\r\n      const matchingIndices = prises.reduce((acc, prise, index) => {\r\n        if (prise === requiredPrize) {\r\n          acc.push(index);\r\n        }\r\n        return acc;\r\n      }, []);\r\n\r\n      const randomIndex = matchingIndices[Math.floor(Math.random() * matchingIndices.length)];\r\n    \r\n      return randomIndex;\r\n    };\r\n\r\n    const randomIndex = getRandomIndexForPrize(prises, requiredPrize);\r\n\r\n    const segmentAngle = 45;\r\n    const targetRotation = 360 * 5 + (randomIndex) * segmentAngle; \r\n  \r\n\r\n    const styleSheet = document.styleSheets[0];\r\n    const keyframes = `\r\n      @keyframes spin {\r\n        0% {\r\n          transform: rotate(0deg);\r\n        }\r\n          10% {\r\n          transform: rotate(-30deg);\r\n          }\r\n\r\n          80% {\r\n            transform: rotate(${targetRotation}deg);\r\n          }\r\n          100% {\r\n          transform: rotate(${targetRotation}deg);\r\n          }\r\n      }\r\n    `;\r\n\r\n    if (styleSheet.cssRules.length > 0) {\r\n      styleSheet.deleteRule(0);\r\n    }\r\n\r\n    styleSheet.insertRule(keyframes, styleSheet.cssRules.length);\r\n\r\n    setAnimation(`spin 5s ease-in-out`);\r\n\r\n    setTimeout(() => {\r\n      setVis(true);\r\n      setTimeout(() => {\r\n        setPrise(prises[randomIndex]);\r\n        setAnimation('');\r\n        console.log(prises[randomIndex]);\r\n      }, 100)\r\n\r\n    }, 4900);\r\n  };\r\n\r\n  function getParseTime(time) {\r\n    const hCount = Math.floor(time / 3600);\r\n    const mCount = Math.floor((time % 3600) / 60);\r\n    const sCount = Math.floor(time % 60);\r\n\r\n    const h = hCount > 9 ? hCount : `0${hCount}`;\r\n    const m = mCount > 9 ? mCount : `0${mCount}`;\r\n    const s = sCount > 9 ? sCount : `0${sCount}`;\r\n    return `${h}:${m}:${s}`;\r\n  }\r\n\r\n  function getProccent() {\r\n    return time / (3600 * 24 / 100);\r\n  }\r\n\r\n  function modalClose() {\r\n    setTime(0);\r\n    setTimeout(() => {\r\n      setVis(false);\r\n    }, 2500)\r\n    \r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={cls.container}>\r\n        <img className={cls.arrow} src='assets/images/arrow.png' alt='arrow' />\r\n        <img\r\n          className={cls.wheel}\r\n          style={{ animation: animation }}\r\n          src='assets/images/wheel.png'\r\n          alt='wheel'\r\n        />\r\n      </div> {\r\n        time >= 24 * 3600 ?\r\n        <button className={cls.button} onClick={handleSpin}>Выигрывать</button> :\r\n        <button className={cls.buttonAwait} style={{background: `linear-gradient(90deg, #008aff ${getProccent()}%, #fff ${getProccent()}%)`}}>{getParseTime(24 * 3600 - time)}</button>\r\n      }\r\n      \r\n      <Modal vis={vis} setVis={modalClose} coins={prise}></Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Wheel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}